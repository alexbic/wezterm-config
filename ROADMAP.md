# 🗺️ WEZTERM CONFIG PROJECT ROADMAP

┌─────────────────────────────────────────────────────────────────┐
│                     🛡️ СТРАТЕГИЯ РЕЛИЗОВ                      │
│                        (НЕ ИЗМЕНЯЕТСЯ)                         │
└─────────────────────────────────────────────────────────────────┘

## 🎯 RELEASE 1.0 - ЕДИНЫЙ ИНТЕРФЕЙС УПРАВЛЕНИЯ

### 🏆 ГЛАВНАЯ ЦЕЛЬ
**Единый интерфейс настройки** - одна клавиша доступа ко всем функциям конфигурации для новых пользователей.

### 📋 КЛЮЧЕВЫЕ БЛОКИ RELEASE 1.0:
- [🟡] **F9 Локализация** - система управления языками (85% готова)
 - [x] Интерфейс F9 ✅
 - [x] Создание локалей ✅
 - [x] Переключение языков ✅
 - [🟡] Автоперевод (критическая ошибка двойных запятых)
- [ ] **F10 Настройки** - объединенный интерфейс всех конфигураций
 - [x] Настройки локализации (F9) ✅
 - [x] Настройки отладки модулей (Shift+F12) ✅
 - [ ] Настройки горячих клавиш
 - [ ] Настройки ассистента AI
- [ ] **Визуальное оформление** - предустановленные темы и схемы
- [ ] **F1-F12 Документация** - полное описание всех горячих клавиш
- [ ] **Система туториалов** - помощь для новых пользователей
- [ ] **Автодиагностика** - обнаружение проблем конфигурации

## 🚀 RELEASE 2.0 - ИНТЕГРАЦИЯ С AI АССИСТЕНТАМИ
- [ ] **Claude API интеграция** - умные подсказки и диагностика
- [ ] **AI автоперевод** - автоматический перевод локалей
- [ ] **Умная настройка** - AI рекомендации по конфигурации

┌─────────────────────────────────────────────────────────────────┐
│                   📋 ИСТОРИЯ РАЗРАБОТКИ                        │
│                  (ПОПОЛНЯЕТСЯ ПО ЧАТАМ)                        │
└─────────────────────────────────────────────────────────────────┘

## ✅ ВЫПОЛНЕНО В ЧАТЕ #29:
**🎯 Цель:** Восстановление централизованной иконочной системы
- [x] **Массовые исправления синтаксиса** - все environment.icons.t."key" → environment.icons.t.key
- [x] **config/environment/init.lua** - добавлен экспорт icons
- [x] **F9 интерфейс работает** без синтаксических ошибок
- [x] **Новые паттерны ошибок** задокументированы в ASSISTANT_INSTRUCTIONS
- [x] **Правила блоков команд** систематизированы

**📖 Для README:** Система иконок централизована, F9 локализация базово работает

## ✅ ВЫПОЛНЕНО В ЧАТЕ #30:
**🎯 Цель:** Тестирование и диагностика F9 автолокализации
- [x] **F9 интерфейс протестирован** - корректно показывает языки, переключается
- [x] **create-locale.sh функционален** - создает файлы локалей корректно
- [x] **Кэш перестраивается** - метаданные и current_language синхронизированы
- [x] **Базовая система работает** - создание файлов, перестройка кэша

**❌ Критические проблемы выявлены:**
- auto-translate.sh зависает при вызове translate shell
- F9 создает en.lua с русскими текстами (нет автоперевода)
- Интерфейс остается русским после переключения

**📖 Для README:** F9 базовая функциональность работает, требует доработки автоперевода

## 🟡 ВЫПОЛНЕНО В ЧАТЕ #31:
**🎯 Цель:** Решение проблем автоперевода F9 локализации
- [x] **Диагностика проблем автоперевода** - найдены корни проблем с кавычками
- [x] **Архитектурная очистка** - удалены дубликаты из ru.lua (20 строк мусора)
- [x] **Кроссплатформенность** - создан универсальный скрипт для macOS/Linux/Windows
- [x] **Логика метаданных исправлена** - корректные locale и name языков
- [🟡] **Логика кавычек** - выявлена проблема, но требует доработки

**🔧 Технические достижения:**
- Создан create-locale-universal.sh с определением платформы
- Исправлено определение исходного языка (regex с [[:space:]])
- Очищен эталонный ru.lua от 20 дубликатов "ДУБЛИКАТ УДАЛЕН"
- Выявлена проблема: translate-shell возвращает разные форматы кавычек

**❌ Нерешенные проблемы:**
- Двойные кавычки в переводах: `""текст"","`
- Ошибки синтаксиса Lua из-за неправильной обработки кавычек

**📖 Для README:** F9 архитектурно очищена, проблемы автоперевода диагностированы

## 🔴 ВЫПОЛНЕНО В ЧАТЕ #32:
**🎯 Цель:** Диагностика критических проблем логики кавычек
- [x] **Выявлены корни проблем** F9 автолокализации
- [x] **Проблема двойных запятых** - translate-shell + логика обработки
- [x] **Проблема двойных кавычек** - функция clean_translation недостаточна
- [x] **Логика SUCCESS/FAIL** в скрипте некорректна

**🔧 Технические находки:**
- Паттерн ошибки: `"window"",` вместо `"window",`
- Баг в clean_translation: не убирает все виды кавычек
- Противоречие: скрипт показывает ERROR но возвращает SUCCESS
- Массивы days/months переводятся некорректно

**❌ Критические попытки исправления:**
- Усиление clean_translation сломало синтаксис скрипта
- Сложные sed-паттерны вызвали bash ошибки
- Скрипт восстановлен из backup

**📖 Для README:** F9 автолокализация требует доработки в чате #33

## 🟡 ВЫПОЛНЕНО В ЧАТЕ #33:
**🎯 Цель:** Восстановление template.lua + диагностика двойных запятых
- [x] **Логика template.lua восстановлена** в create-locale.sh
- [x] **Построчный перевод реализован** с прогресс-баром  
- [x] **Флаг translation_completed** добавлен для F9 интерфейса
- [x] **Кроссплатформенная совместимость** обеспечена

**🔍 Диагностировано:**
- Корень проблемы двойных запятых: translate-shell возвращает `"window"` с кавычками
- Проблема: `"window",",` должно быть `"window",`
- Локализация сообщений использует fallback вместо кэша
- Формат прогресс-бара не соответствует требованию Александра

**❌ Нерешенные проблемы:**
- Двойные запятые в переводах
- Локализация сообщений  
- Формат прогресс-бара

**📖 Для README:** F9 архитектурно исправлена, требует финальной доработки

┌─────────────────────────────────────────────────────────────────┐
│                  🎯 ПЛАН РАБОТ ЧАТ #34                         │
│                  (КРИТИЧЕСКИЕ ЗАДАЧИ)                          │
└─────────────────────────────────────────────────────────────────┘

## 🔴 КРИТИЧЕСКИЕ ЗАДАЧИ ЧАТ #34:

### 1️⃣ ФИНАЛЬНОЕ ИСПРАВЛЕНИЕ F9 АВТОЛОКАЛИЗАЦИИ
**🎯 Цель:** Довести F9 до 100% работоспособности

**📋 Конкретные шаги:**
- [ ] **Исправить функцию clean_translation** 
 - Убирать ВСЕ виды кавычек: `"`, `'`, `„`, `"`, `«`, `»`
 - Тестировать на проблемных значениях: `"окно"`, `"Windows"`
 - Использовать паттерн: `sed 's/^["\x27„""«»]*//g' | sed 's/["\x27„""«»]*$//g'`

- [ ] **Исправить локализацию сообщений скрипта**
 - Починить функцию get_localized_message для чтения config/environment/locale.lua
 - Убрать fallback тексты, использовать только кэш
 - Формат прогресс-бара: `🌐 Создание en.lua из ru.lua █████░░░ [15/47 кл.]`

- [ ] **Протестировать полный цикл**
 - ru → en → de → fr без ошибок синтаксиса
 - Проверить флаг translation_completed для всех языков
 - Интеграция в F9 интерфейс

### 2️⃣ ТЕСТИРОВАНИЕ МНОЖЕСТВЕННЫХ ЯЗЫКОВ
**📋 Задачи:**
- [ ] **Создание полного набора локалей**
 - en.lua (английский)
 - de.lua (немецкий) 
 - fr.lua (французский)
 - es.lua (испанский)

- [ ] **Тестирование F9 переключения**
 - Проверить F9 → создание → переключение → интерфейс на новом языке
 - Убедиться что кэш правильно перестраивается
 - Протестировать на реальном WezTerm

## 📊 ОЖИДАЕМЫЕ РЕЗУЛЬТАТЫ ЧАТ #34:

**✅ МИНИМАЛЬНЫЙ УСПЕХ:**
- F9 автолокализация работает без ошибок синтаксиса
- Создание en.lua и de.lua проходит успешно
- Прогресс-бар в правильном формате

**🎯 ЦЕЛЕВОЙ РЕЗУЛЬТАТ:**
- F9 полностью функциональна с 4+ языками
- Переключение языков работает через F9
- Все сообщения локализованы правильно

**🚀 МАКСИМАЛЬНЫЙ УСПЕХ:**
- F9 готова к включению в RELEASE 1.0
- Начата подготовка к F10 центральному менеджеру
- README обновлен с актуальным статусом F9

---
*Обновлено в чате #33 - детализирован план чата #34, зафиксирован статус F9*

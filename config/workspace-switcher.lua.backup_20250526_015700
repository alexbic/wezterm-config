local wezterm = require('wezterm')
local M = {}

-- Ğ˜Ğ½Ğ¸Ñ†Ğ¸Ğ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Ğ¿Ğ»Ğ°Ğ³Ğ¸Ğ½Ğ° Smart Workspace Switcher
local workspace_switcher = wezterm.plugin.require("https://github.com/MLFlexer/smart_workspace_switcher.wezterm")
M.workspace_switcher = workspace_switcher

-- ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ° Ğ¿ÑƒÑ‚Ğ¸ Ğº zoxide Ğ´Ğ»Ñ macOS
workspace_switcher.zoxide_path = "/opt/homebrew/bin/zoxide"


-- Ğ¤ÑƒĞ½ĞºÑ†Ğ¸Ñ Ğ´Ğ»Ñ Ğ¿Ğ¾Ğ»ÑƒÑ‡ĞµĞ½Ğ¸Ñ ÑĞ¾Ñ…Ñ€Ğ°Ğ½Ñ‘Ğ½Ğ½Ñ‹Ñ… workspace
local function get_saved_workspaces()
  local saved = {}
  local paths = require("config.environment.paths")
  local workspace_dir = paths.resurrect_state_dir .. "workspace"
  local cmd = "ls " .. workspace_dir .. "/*.json 2>/dev/null || true"
  local handle = io.popen(cmd)
  if handle then
    for line in handle:lines() do
      local name = line:match("([^/]+)%.json$")
      if name then
        table.insert(saved, {id = name, label = "ğŸ’¾ " .. name})
      end
    end
    handle:close()
  end
  return saved
end
return M

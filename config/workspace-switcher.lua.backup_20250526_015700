local wezterm = require('wezterm')
local M = {}

-- Инициализация плагина Smart Workspace Switcher
local workspace_switcher = wezterm.plugin.require("https://github.com/MLFlexer/smart_workspace_switcher.wezterm")
M.workspace_switcher = workspace_switcher

-- Настройка пути к zoxide для macOS
workspace_switcher.zoxide_path = "/opt/homebrew/bin/zoxide"


-- Функция для получения сохранённых workspace
local function get_saved_workspaces()
  local saved = {}
  local paths = require("config.environment.paths")
  local workspace_dir = paths.resurrect_state_dir .. "workspace"
  local cmd = "ls " .. workspace_dir .. "/*.json 2>/dev/null || true"
  local handle = io.popen(cmd)
  if handle then
    for line in handle:lines() do
      local name = line:match("([^/]+)%.json$")
      if name then
        table.insert(saved, {id = name, label = "💾 " .. name})
      end
    end
    handle:close()
  end
  return saved
end
return M
